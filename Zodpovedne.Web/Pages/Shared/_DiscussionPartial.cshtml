@*
    Partial View pro zobrazení jedné diskuze v seznamu.
    Používá se jak pro počáteční vykreslení seznamu diskuzí, tak pro dynamicky načtené diskuze.

    Model: Instance DiscussionListDto obsahující data o diskuzi
*@
@model Zodpovedne.Contracts.DTO.DiscussionListDto
        <div class="card-diskuse me-2 kategorie-wrapper col-sm-12 col-xl-6"
             onmouseover="this.classList.add('shadow'); this.classList.add('bg-white');"
             onmouseout="this.classList.remove('shadow'); this.classList.remove('bg-white');">
                <div class="title-autor-wrapper">
                    <div class="title-wrapper">
                        <a href="/Categories/@Model.CategoryCode/@Model.Code" class="text-decoration-none w-100">
                             <div class="card-title seznam-diskuse-title">
                                @* Zobrazení TOP badgu pro prioritní diskuze *@
                                @if (Model.Type == Zodpovedne.Contracts.Enums.DiscussionType.Top)
                                {
                                <span class="top-star">@*TOP*@
                                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24">

                                        <path d="M12,2 L15.09,8.26 L22,9.27 L17,14.14 L18.18,21.02 L12,17.77 L5.82,21.02 L7,14.14 L2,9.27 L8.91,8.26 Z"
                                              fill="var( --light-primary-color)"
                                              stroke="var(--primary-color)"
                                              stroke-width="0.5" />

                                        <text x="12" y="14"
                                              font-family="Arial, sans-serif"
                                              font-weight="bold"
                                              font-size="4.5"
                                              text-anchor="middle"
                                              fill="var(--primary-color)">TOP</text>
                                    </svg>
                                </span>
                                }
                                @if (Model.Type == Zodpovedne.Contracts.Enums.DiscussionType.ForFriends)
                                {
                                    <span title="Diskuze viditelná pouze pro přátele autora">
                                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24">
                                            <!-- Kulaté pozadí -->
                                            <circle cx="12" cy="12" r="11" fill="var(--light-primary-color-ultra-light)"
                                                    stroke="var(--primary-color)" stroke-width="0.5" />

                                            <!-- Tělo zámku -->
                                            <rect x="7" y="11" width="10" height="8" rx="1.5"
                                                  fill="var(--light-primary-color-ultra-light)"
                                                  stroke="var(--primary-color)" stroke-width="1" />

                                            <!-- Horní část zámku -->
                                            <path d="M9,11 L9,8 C9,6.34315 10.3431,5 12,5 C13.6569,5 15,6.34315 15,8 L15,11"
                                                  fill="none" stroke="var(--primary-color)"
                                                  stroke-width="1" stroke-linecap="round" />

                                            <!-- Klíčová dírka -->
                                            <circle cx="12" cy="14" r="1" fill="var(--primary-color)" />
                                            <rect x="11.5" y="14" width="1" height="2.5" fill="var(--primary-color)" />

                                            <!-- Text oznámení -->
                                            <text x="12" y="21.5"
                                                  font-family="Arial, sans-serif"
                                                  font-size="3"
                                                  text-anchor="middle"
                                                  fill="var(--primary-color)">SOUKROMÁ</text>
                                        </svg>
                                    </span>
                                }
                                @* Odkaz na detail diskuze *@
                                <span class="seznam-diskusi-title-text"> @Model.Title</span>
                            </div>
                        </a>
                     </div>
             
                </div>

                @* Metadata diskuze *@
                <div class="card-text text-muted popisky w-100" style="display: flex; justify-content: space-between;">
                  <div>
                    @* Datum vytvoření - převedené na lokální čas *@
                    <span title="Datum vytvoření">
                        <i class="bi bi-calendar-plus"></i> @Model.CreatedAt.ToLocalTime().ToString("dd.MM.yyyy")
                    </span>
                    @* Datum aktualizace - převedené na lokální čas *@
                    <span title="Datum aktualizace">
                        @if (Model.UpdatedAt.Date != Model.CreatedAt.Date)
                        {
                            @Html.Raw("&nbsp; | &nbsp;<i class=\"bi bi-pencil\"></i>")
                        }
                        @(Model.UpdatedAt.Date != Model.CreatedAt.Date ? Model.UpdatedAt.ToLocalTime().ToString("dd.MM.yyyy") : "")
                    </span>
                    <span style="margin-right: 3px; margin-left:3px;">•</span>

                    @* Počet komentářů *@
                    <span title="Počet komentářů">
                        <i class="bi bi-chat"></i> @Model.CommentsCount
                    </span>
                    <span style="margin-right: 3px; margin-left:3px;">•</span>
                    @* Počet zobrazení *@
                    <span title="Počet zobrazení">
                        <i class="bi bi-eye"></i> @Model.ViewCount
                    </span>
                  </div>
                    <div class="autor-wrapper">
                        @* Autor *@
                        <div class="autor">
                            <span title="Autor">
                                @Html.Raw("&nbsp;")
                                <i class="bi bi-person"></i> <a asp-page="/Account/Profile" asp-route-nickname="@Model.AuthorNickname">@Model.AuthorNickname</a>
                                @Html.Raw("&nbsp;")
                            </span>
                        </div>
                    </div>
                </div>
                
              
        </div>